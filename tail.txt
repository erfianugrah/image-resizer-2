{
  "wallTime": 661,
  "cpuTime": 25,
  "truncated": false,
  "executionModel": "stateless",
  "outcome": "ok",
  "scriptVersion": {
    "id": "7d366527-c775-4b7e-a6f5-88293f5469c7"
  },
  "scriptName": "image-resizer-2-production",
  "diagnosticsChannelEvents": [],
  "exceptions": [],
  "logs": [
    {
      "message": [
        "Loaded custom derivatives from environment",
        {
          "derivatives": [
            "avatar",
            "banner",
            "header",
            "product",
            "thumbnail"
          ],
          "totalDerivatives": 5
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "message": "Auth service initialized with authentication disabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[DEBUG] Using default detector configuration as no config was provided",
        ""
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[DEBUG] Detector configuration set",
        {
          "cacheSize": 10000,
          "strategies": [
            "clientHints",
            "acceptHeader",
            "userAgent",
            "staticData",
            "defaults"
          ],
          "logLevel": "info"
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[DEBUG] Initialized detection strategies",
        {
          "count": 5,
          "enabled": "client-hints, accept-header, user-agent, static-data, defaults",
          "priorities": "client-hints:100, accept-header:80, user-agent:60, static-data:20, defaults:0"
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[DEBUG] Detector configuration updated",
        {
          "newCacheSize": 10000,
          "strategiesCount": 5,
          "hashAlgorithm": "fnv1a"
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "cacheEnabled": true,
          "deviceScoreThresholds": {
            "lowEnd": 30,
            "highEnd": 70
          },
          "hashAlgorithm": "fnv1a",
          "message": "Client detection service configured"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "maxCacheSize": 10000,
          "message": "Optimized client detection service configured"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "message": "Using optimized client detection service with request-scoped caching"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "Client detection service set"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "serviceCount": 8,
          "services": "configuration, logging, storage, transformation, cache, debug, clientDetection, auth",
          "environment": "production",
          "message": "Service container initialized with all services"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "message": "Performance baseline tracking initialized"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "Starting measurement: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "message": "Worker initialized with logging level DEBUG"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[DEBUG] Detector configuration set",
        {
          "cacheSize": 10000,
          "strategies": [
            "clientHints",
            "acceptHeader",
            "userAgent",
            "staticData",
            "defaults"
          ],
          "logLevel": "info"
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "cacheSize": 10000,
          "strategies": "clientHints, acceptHeader, userAgent, staticData, defaults",
          "hashAlgorithm": "fnv1a",
          "message": "Client detector initialized with configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "method": "GET",
          "userAgent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.2 Mobile/15E148 Safari/604.1",
          "message": "BREADCRUMB: Request started"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "Starting measurement: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "Starting operation: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "Starting measurement: akamai_compat"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "Starting operation: akamai_compat"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "advancedFeatures": "enabled",
          "message": "Akamai compatibility is enabled, checking URL format"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "No Akamai parameters detected in URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "used": false,
          "message": "Completed measurement: akamai_compat - 0ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "used": false,
          "message": "Performance: core:akamai_compat - 0ms (avg: 0.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "Starting measurement: image_request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "message": "Starting operation: image_request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Parsing image path",
        {
          "pathname": "/Oliwka_1.JPG"
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Finished parsing image path",
        {
          "imagePath": "/Oliwka_1.JPG",
          "optionsCount": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Applying path transforms",
        {
          "imagePath": "/Oliwka_1.JPG",
          "transformCount": 3
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: No matching transform found for segment",
        {
          "segment": "Oliwka_1.JPG"
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Parsing query options",
        {
          "paramCount": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed parsing query options",
        {
          "optionCount": 0,
          "hasWidth": false,
          "hasHeight": false,
          "hasFormat": false,
          "hasBlur": false,
          "hasFlip": false,
          "flipValue": "undefined"
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "derivatives": "avatar, banner, header, product, thumbnail",
          "count": 5,
          "pathname": "/Oliwka_1.JPG",
          "message": "Available derivatives"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Extracting derivative from path",
        {
          "pathname": "/Oliwka_1.JPG",
          "availableDerivatives": 5
        }
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: No derivative found in path",
        ""
      ],
      "level": "log",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Executing transform image command"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "imagePath": "/Oliwka_1.JPG",
          "options": "",
          "requestId": "bhbdq80c",
          "via": "",
          "cfWorker": "",
          "alreadyProcessed": "",
          "possibleDuplicate": false,
          "message": "BREADCRUMB: Starting image transformation command"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "imagePath": "/Oliwka_1.JPG",
          "message": "BREADCRUMB: Fetching image from storage"
        }
      ],
      "level": "info",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "storagePriority": "remote,fallback",
          "r2Enabled": true,
          "hasRemoteUrl": true,
          "hasFallbackUrl": true,
          "message": "Fetching image from storage with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "remoteUrl": "https://cdn.erfianugrah.com",
          "message": "Fetching from remote with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "originalPath": "/Oliwka_1.JPG",
          "transformedPath": "Oliwka_1.JPG",
          "message": "Remote path after transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "type": "aws-s3",
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Remote auth enabled"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 50,
          "accessKeyVar": "AWS_ACCESS_KEY_ID",
          "secretKeyVar": "AWS_SECRET_ACCESS_KEY",
          "message": "AWS credentials not found"
        }
      ],
      "level": "error",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "fallbackUrl": "https://cdn.erfianugrah.com",
          "message": "Fetching from fallback with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "originalPath": "/Oliwka_1.JPG",
          "transformedPath": "Oliwka_1.JPG",
          "message": "Fallback path after transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Fallback auth not enabled for this URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651361,
          "level": 20,
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Fetching from fallback URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651361
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "contentType": "image/jpeg",
          "size": 5730693,
          "status": 200,
          "message": "Successfully fetched image from fallback"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "size": 5730693,
          "durationMs": 77,
          "message": "BREADCRUMB: Storage fetch completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "options": "",
          "message": "BREADCRUMB: Starting image transformation"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "optionsKeys": [],
          "hasClientDetection": true,
          "message": "Starting image transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "message": "Optimizing transformation options with client detection"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "message": "Cache miss for optimized options, generating"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "baseOptions": "",
          "message": "Getting optimized transformation options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.2 Mobile/15E148 Safari/604.1",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[DEBUG] Using User-Agent for detection",
        {
          "userAgent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.",
          "maxLength": 100
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "deviceType": "mobile",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": false,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Starting optimized transformation selection",
        {
          "requestUrl": "https://images.erfi.dev/Oliwka_1.JPG",
          "userAgent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) Ap",
          "hasAcceptHeader": true,
          "hasSaveData": false,
          "hasClientHints": false,
          "optionsProvided": "none"
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Initial optimizations from client hints",
        {
          "hasFormat": false,
          "hasQuality": true,
          "hasDpr": false,
          "hasWidth": false,
          "hasHeight": false,
          "optimizedParams": "networkQuality,deviceCapabilities,performanceBudget,quality"
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Determining optimized format using cascading priority",
        {
          "autoFormat": true,
          "cascadeEnabled": true,
          "acceptHeaderSource": false,
          "browserSource": "user-agent",
          "avifSupport": false,
          "webpSupport": true
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[DEBUG] Format selected based on browser-detection",
        {
          "format": "webp",
          "source": "user-agent",
          "priority": 60
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Format selection decision",
        {
          "format": "webp",
          "decisionSource": "user-agent",
          "decisionMethod": "browser-detection",
          "decisionTier": "browser-detection",
          "configuredPriority": 60
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed cascading decisions for optimization",
        {
          "cascadeComplete": true,
          "hasCascadedFormat": true,
          "hasCascadedQuality": true,
          "hasCascadedDimensions": false,
          "deviceTypeUsed": "mobile",
          "deviceScoreUsed": 40,
          "networkTierUsed": "unknown",
          "detectionTime": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "optimizedFormat": "webp",
          "optimizedQuality": 75,
          "optimizationApplied": true,
          "message": "Applied client optimized options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Building transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "imageSize": 5730693,
          "contentType": "image/jpeg",
          "optionsProvided": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo",
          "message": "BREADCRUMB: buildTransformOptions started"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Using client detection service for options optimization"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "message": "Cache miss for optimized options, generating"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "baseOptions": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo",
          "message": "Getting optimized transformation options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.2 Mobile/15E148 Safari/604.1",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "deviceType": "mobile",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": false,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Starting optimized transformation selection",
        {
          "requestUrl": "https://images.erfi.dev/Oliwka_1.JPG",
          "userAgent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) Ap",
          "hasAcceptHeader": true,
          "hasSaveData": false,
          "hasClientHints": false,
          "optionsProvided": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo"
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Initial optimizations from client hints",
        {
          "hasFormat": false,
          "hasQuality": false,
          "hasDpr": false,
          "hasWidth": false,
          "hasHeight": false,
          "optimizedParams": "networkQuality,deviceCapabilities,performanceBudget"
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed cascading decisions for optimization",
        {
          "cascadeComplete": true,
          "hasCascadedFormat": false,
          "hasCascadedQuality": false,
          "hasCascadedDimensions": false,
          "deviceTypeUsed": "mobile",
          "deviceScoreUsed": 40,
          "networkTierUsed": "unknown",
          "detectionTime": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "detectionTime": "0ms",
          "originalFormat": "webp",
          "optimizedFormat": "webp",
          "message": "Client detection optimization completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "hasWidth": false,
          "autoWidth": false,
          "userAgent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.2 Mobile/15E148 Safari/604.1",
          "viewportWidth": "unknown",
          "deviceType": "tablet",
          "message": "BREADCRUMB: Calculating responsive width"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "calculatedWidth": 768,
          "durationMs": 0,
          "message": "BREADCRUMB: Responsive width calculated"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "width": 768,
          "message": "BREADCRUMB: Applied responsive width"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "finalOptionsCount": 10,
          "hasWidth": true,
          "hasHeight": false,
          "width": 768,
          "format": "webp",
          "quality": 75,
          "fit": "scale-down",
          "allParams": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo,width,fit,metadata",
          "message": "BREADCRUMB: buildTransformOptions completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "networkQuality": {
            "tier": "unknown",
            "description": "No network information available",
            "estimated": true
          },
          "deviceCapabilities": {
            "description": "Standard device mobile iOS",
            "estimated": false,
            "mobile": true,
            "platform": "iOS",
            "score": 40
          },
          "performanceBudget": {
            "quality": {
              "min": 60,
              "max": 85,
              "target": 75
            },
            "maxWidth": 1500,
            "maxHeight": 1500,
            "preferredFormat": "auto",
            "dpr": 1
          },
          "quality": 75,
          "format": "webp",
          "__detectionMetrics": {
            "browser": "ios_saf 14.7",
            "deviceScore": 40,
            "deviceMemory": 4,
            "deviceProcessors": 4,
            "networkQuality": "unknown",
            "detectionTime": 0,
            "cascadeResults": {
              "formatDecision": {
                "finalFormat": "webp",
                "source": "user-agent",
                "avifSupported": false,
                "webpSupported": true
              },
              "qualityDecision": {
                "finalQuality": 75,
                "source": "cascade-system",
                "networkTier": "unknown",
                "deviceScore": 40
              },
              "responsiveResults": {
                "dpr": 1
              }
            },
            "source": {
              "browser": "user-agent",
              "formats": "user-agent"
            },
            "configuredHash": "fnv1a",
            "cacheEnabled": true
          },
          "__clientInfo": {
            "deviceType": "mobile",
            "networkQuality": "unknown",
            "deviceClassification": "mid-range",
            "saveData": false,
            "formatSupport": {
              "webp": true,
              "avif": false
            }
          },
          "width": 768,
          "fit": "scale-down",
          "metadata": "none",
          "durationMs": 0,
          "message": "BREADCRUMB: Built transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "networkQuality": {
            "tier": "unknown",
            "description": "No network information available",
            "estimated": true
          },
          "deviceCapabilities": {
            "description": "Standard device mobile iOS",
            "estimated": false,
            "mobile": true,
            "platform": "iOS",
            "score": 40
          },
          "performanceBudget": {
            "quality": {
              "min": 60,
              "max": 85,
              "target": 75
            },
            "maxWidth": 1500,
            "maxHeight": 1500,
            "preferredFormat": "auto",
            "dpr": 1
          },
          "quality": 75,
          "format": "webp",
          "__detectionMetrics": {
            "browser": "ios_saf 14.7",
            "deviceScore": 40,
            "deviceMemory": 4,
            "deviceProcessors": 4,
            "networkQuality": "unknown",
            "detectionTime": 0,
            "cascadeResults": {
              "formatDecision": {
                "finalFormat": "webp",
                "source": "user-agent",
                "avifSupported": false,
                "webpSupported": true
              },
              "qualityDecision": {
                "finalQuality": 75,
                "source": "cascade-system",
                "networkTier": "unknown",
                "deviceScore": 40
              },
              "responsiveResults": {
                "dpr": 1
              }
            },
            "source": {
              "browser": "user-agent",
              "formats": "user-agent"
            },
            "configuredHash": "fnv1a",
            "cacheEnabled": true
          },
          "__clientInfo": {
            "deviceType": "mobile",
            "networkQuality": "unknown",
            "deviceClassification": "mid-range",
            "saveData": false,
            "formatSupport": {
              "webp": true,
              "avif": false
            }
          },
          "width": 768,
          "fit": "scale-down",
          "metadata": "none",
          "message": "Transform options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Applying cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "message": "Using CacheService for applying Cloudflare cache settings"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "hasOptions": true,
          "cfMethod": "cf",
          "cacheEverything": true,
          "message": "Applying Cloudflare cache settings"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cacheTagsEnabled": true,
          "hasImagePath": true,
          "hasOptions": true,
          "message": "BREADCRUMB: Checking cache tag generation requirements"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "sourceType": "remote",
          "hasOptions": true,
          "message": "Generating cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "tagCount": 2,
          "message": "BREADCRUMB: Adding custom tags from configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "pathBasedTagsCount": 5,
          "message": "BREADCRUMB: Processing path-based tags"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "tagCount": 10,
          "generationTime": 0,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-webp, img-prod-width-768, img-prod-quality-75, img-prod-prod...",
          "message": "Generated cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "tagCount": 10,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-webp, img-prod-width-768...",
          "message": "Generated cache tags for Cloudflare fetch API"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "ttl": 604800,
          "message": "BREADCRUMB: Using simple cacheTtl"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "mode": "cacheTtl",
          "ttl": "604800s",
          "note": "All status codes will use this TTL in Cloudflare cache",
          "message": "Simple cache TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 20,
          "tagCount": 10,
          "firstFewTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-webp, img-prod-width-768, img-prod-quality-75, img-prod-prod...",
          "message": "Adding cache tags to Cloudflare request CF object"
        }
      ],
      "level": "debug",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cacheEverything": true,
          "hasCacheTtl": true,
          "hasCacheTtlByStatus": false,
          "tagCount": 10,
          "durationMs": 0,
          "message": "BREADCRUMB: Applied Cloudflare cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "durationMs": 0,
          "message": "BREADCRUMB: Applied cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "imageSize": 5730693,
          "transformOptionsCount": 10,
          "message": "BREADCRUMB: Starting Cloudflare image transformation"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cfOptions": "{\"image\":{\"networkQuality\":{\"tier\":\"unknown\",\"description\":\"No network information available\",\"estimated\":true},\"deviceCapabilities\":{\"description\":\"Standard device mobile iOS\",\"estimated\":false,\"mobile\":true,\"platform\":\"iOS\",\"score\":40},\"performanceBudget\":{\"quality\":{\"min\":60,\"max\":85,\"target\":75},\"maxWidth\":1500,\"maxHeight\":1500,\"preferredFormat\":\"auto\",\"dpr\":1},\"quality\":75,\"format\":\"webp\",\"__detectionMetrics\":{\"browser\":\"ios_saf 14.7\",\"deviceScore\":40,\"deviceMemory\":4,\"deviceProcessors\":4,\"networkQuality\":\"unknown\",\"detectionTime\":0,\"cascadeResults\":{\"formatDecision\":{\"finalFormat\":\"webp\",\"source\":\"user-agent\",\"avifSupported\":false,\"webpSupported\":true},\"qualityDecision\":{\"finalQuality\":75,\"source\":\"cascade-system\",\"networkTier\":\"unknown\",\"deviceScore\":40},\"responsiveResults\":{\"dpr\":1}},\"source\":{\"browser\":\"user-agent\",\"formats\":\"user-agent\"},\"configuredHash\":\"fnv1a\",\"cacheEnabled\":true},\"__clientInfo\":{\"deviceType\":\"mobile\",\"networkQuality\":\"unknown\",\"deviceClassification\":\"mid-range\",\"saveData\":false,\"formatSupport\":{\"webp\":true,\"avif\":false}},\"width\":768,\"fit\":\"scale-down\",\"metadata\":\"none\"},\"cacheEverything\":true,\"cacheTtl\":604800,\"cacheMode\":\"simple\",\"simpleTtl\":604800,\"cacheTags\":[\"img-prod-path-Oliwka_1-JPG\",\"img-prod-format-webp\",\"img-prod-width-768\",\"img-prod-quality-75\",\"img-prod-prod\",\"img-prod-site1\",\"img-prod-origin-remote\",\"img-prod-method-get\",\"img-prod-status-success\",\"img-prod-code-200\"]}",
          "hasWidth": true,
          "hasHeight": false,
          "hasFit": true,
          "fit": "scale-down",
          "format": "webp",
          "quality": 75,
          "imageSourceSize": "5596KB",
          "message": "BREADCRUMB: CF image transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Creating fetch promise with CF options"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "durationMs": 0,
          "message": "BREADCRUMB: Fetch promise created"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991651438,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Awaiting CF transformation result"
        }
      ],
      "level": "info",
      "timestamp": 1742991651438
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentType": "image/webp",
          "raceTime": 567,
          "totalTime": 567,
          "durationMs": 567,
          "message": "BREADCRUMB: Cloudflare transformation completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Creating final response"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "cacheControl": "public, max-age=604800",
          "message": "Added cache control headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "userAgent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) Ap",
          "message": "BREADCRUMB: Added client hints headers to response"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentType": "image/webp",
          "durationMs": 567,
          "message": "BREADCRUMB: Image transformation completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Applying cache headers with smart options"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "cacheMethod": "cf",
          "status": 200,
          "contentType": "image/webp",
          "hasOptions": false,
          "message": "Applying cache headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "hasStorageResult": true,
          "message": "Calculating TTL for response"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "originMaxAge": 604800,
          "originalTtl": 604800,
          "message": "Using origin max-age for TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "staleTime": 302400,
          "newCacheControl": "public, max-age=604800, stale-while-revalidate=302400",
          "message": "Added stale-while-revalidate directive"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "ttl": 604800,
          "status": 200,
          "contentType": "image/webp",
          "derivative": "none",
          "quality": "default",
          "message": "Calculated final TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "sourceType": "fallback",
          "hasOptions": false,
          "message": "Generating cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "tagCount": 2,
          "message": "BREADCRUMB: Adding custom tags from configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "pathBasedTagsCount": 5,
          "message": "BREADCRUMB: Processing path-based tags"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "tagCount": 14,
          "generationTime": 0,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1, img-prod-type-image, img-prod-subtype-jpeg...",
          "message": "Generated cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "tagCount": 14,
          "firstFewTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1...",
          "message": "Added cache tags to response via Cache-Tag header"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "cacheControl": "public, max-age=604800, stale-while-revalidate=302400, no-transform, stale-if-error=86400",
          "cacheTagHeader": "img-prod-path-Oliwka_1-JPG,img-prod-prod,img-prod-site1,img-prod-type-image,img-prod-subtype-jpeg,img-prod-cc-public,img-prod-cc-max-age-long,img-prod-origin-fallback,img-prod-method-get,img-prod-status-success,img-prod-code-200,img-prod-mime-image,img-prod-imgfmt-jpeg,img-prod-size-huge",
          "status": 200,
          "ttl": 604800,
          "message": "Applied enhanced cache headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "debugEnabledInConfig": true,
          "environment": "production",
          "forceDebugHeaders": false,
          "message": "BREADCRUMB: Checking if debug is enabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugConfig": {
            "enabled": true,
            "forceDebugHeaders": false,
            "allowedEnvironmentsStr": "",
            "environment": "production",
            "headersStr": "cache,mode",
            "verbose": false,
            "isDebugQueryParam": false
          },
          "message": "Debug mode enabled for request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "message": "Cache miss for client info, detecting"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.2 Mobile/15E148 Safari/604.1",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "deviceType": "mobile",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": false,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "deviceType": "mobile",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "message": "Detected client info for debug headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "debugEnabledInConfig": true,
          "environment": "production",
          "forceDebugHeaders": false,
          "message": "BREADCRUMB: Checking if debug is enabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugConfig": {
            "enabled": true,
            "forceDebugHeaders": false,
            "allowedEnvironmentsStr": "",
            "environment": "production",
            "headersStr": "cache,mode",
            "verbose": false,
            "isDebugQueryParam": false
          },
          "message": "Debug mode enabled for request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugEnabled": true,
          "headerCategories": [
            "cache",
            "mode"
          ],
          "transformOptions": [],
          "metricsAvailable": true,
          "message": "Adding enhanced debug headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "cacheControl": "no-cache",
          "reason": "Cache-Control header indicates no caching",
          "message": "Cache-Control header bypass detected"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentLength": "75150",
          "contentType": "image/webp",
          "totalDurationMs": 644,
          "durationMs": 644,
          "message": "BREADCRUMB: Transform image command completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "message": "Completed measurement: image_request - 644ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "message": "Performance: core:image_request - 644ms (avg: 644.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "message": "Completed measurement: total - 644ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "message": "Performance: core:total - 644ms (avg: 644.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "75150",
          "message": "Completed measurement: total - 644ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "75150",
          "storage": 77,
          "transform": 567,
          "detection": 0,
          "total": 644,
          "message": "Request completed in 644ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    },
    {
      "message": [
        {
          "time": 1742991652005,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "75150",
          "message": "Performance: request:total - 644ms (avg: 644.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991652005
    }
  ],
  "eventTimestamp": 1742991651313,
  "event": {
    "request": {
      "url": "https://images.erfi.dev/Oliwka_1.JPG",
      "method": "GET",
      "headers": {
        "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
        "accept-encoding": "gzip, br",
        "accept-language": "en-GB,en;q=0.5",
        "alt-used": "images.erfi.dev",
        "cache-control": "no-cache",
        "cf-connecting-ip": "195.240.81.42",
        "cf-device-type": "tablet",
        "cf-ipcountry": "NL",
        "cf-ray": "92669abc7d480a57",
        "cf-visitor": "{\"scheme\":\"https\"}",
        "connection": "Keep-Alive",
        "cookie": "REDACTED",
        "host": "images.erfi.dev",
        "pragma": "no-cache",
        "priority": "u=0, i",
        "sec-fetch-dest": "document",
        "sec-fetch-mode": "navigate",
        "sec-fetch-site": "none",
        "sec-fetch-user": "?1",
        "sec-gpc": "1",
        "upgrade-insecure-requests": "1",
        "user-agent": "Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.2 Mobile/15E148 Safari/604.1",
        "x-forwarded-proto": "https",
        "x-real-ip": "195.240.81.42"
      },
      "cf": {
        "requestHeaderNames": {},
        "httpProtocol": "HTTP/3",
        "tlsCipher": "AEAD-AES128-GCM-SHA256",
        "continent": "EU",
        "asn": 1136,
        "clientAcceptEncoding": "gzip, deflate, br, zstd",
        "country": "NL",
        "isEUCountry": "1",
        "latitude": "51.71320",
        "verifiedBotCategory": "",
        "botManagement": {
          "jsDetection": {
            "passed": false
          },
          "ja4Signals": {
            "h2h3_ratio_1h": 1,
            "heuristic_ratio_1h": 0.00019535397586878,
            "reqs_quantile_1h": 0.99996101856232,
            "uas_rank_1h": 314,
            "browser_ratio_1h": 0.9880456328392,
            "paths_rank_1h": 34,
            "reqs_rank_1h": 39,
            "cache_ratio_1h": 0.51640945672989,
            "ips_rank_1h": 34,
            "ips_quantile_1h": 0.99996602535248
          },
          "staticResource": false,
          "corporateProxy": false,
          "ja4": "q13d0314h3_55b375c5d22e_61e396c58b1f",
          "verifiedBot": false,
          "ja3Hash": "e67b61f79c58a27dc679bc15e8b94b0a",
          "score": 99,
          "detectionIds": {}
        },
        "tlsClientAuth": {
          "certIssuerDNLegacy": "",
          "certIssuerSKI": "",
          "certSubjectDNRFC2253": "",
          "certSubjectDNLegacy": "",
          "certFingerprintSHA256": "",
          "certNotBefore": "",
          "certSKI": "",
          "certSerial": "",
          "certIssuerDN": "",
          "certVerified": "NONE",
          "certNotAfter": "",
          "certSubjectDN": "",
          "certPresented": "0",
          "certRevoked": "0",
          "certIssuerSerial": "",
          "certIssuerDNRFC2253": "",
          "certFingerprintSHA1": ""
        },
        "requestPriority": "",
        "tlsVersion": "TLSv1.3",
        "colo": "AMS",
        "timezone": "Europe/Amsterdam",
        "city": "Rosmalen",
        "region": "North Brabant",
        "edgeRequestKeepAliveStatus": 1,
        "tlsClientRandom": "PApCMmYvDvFd4Vhggsv28BOvFWDPcQF7ZjsvPgyoV6I=",
        "longitude": "5.36610",
        "clientTrustScore": 99,
        "postalCode": "5242",
        "regionCode": "NB",
        "asOrganization": "KPN",
        "tlsClientExtensionsSha1": "W+a0kO4MPEmxP/fjW5AAJ6U/6oI=",
        "tlsClientHelloLength": "1839"
      }
    },
    "response": {
      "status": 200
    }
  }
}
{
  "wallTime": 89,
  "cpuTime": 13,
  "truncated": false,
  "executionModel": "stateless",
  "outcome": "ok",
  "scriptVersion": {
    "id": "7d366527-c775-4b7e-a6f5-88293f5469c7"
  },
  "scriptName": "image-resizer-2-production",
  "diagnosticsChannelEvents": [],
  "exceptions": [],
  "logs": [
    {
      "message": [
        "Loaded custom derivatives from environment",
        {
          "derivatives": [
            "avatar",
            "banner",
            "header",
            "product",
            "thumbnail"
          ],
          "totalDerivatives": 5
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "message": "Auth service initialized with authentication disabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[DEBUG] Detector configuration set",
        {
          "cacheSize": 10000,
          "strategies": [
            "clientHints",
            "acceptHeader",
            "userAgent",
            "staticData",
            "defaults"
          ],
          "logLevel": "info"
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[DEBUG] Initialized detection strategies",
        {
          "count": 5,
          "enabled": "client-hints, accept-header, user-agent, static-data, defaults",
          "priorities": "client-hints:100, accept-header:80, user-agent:60, static-data:20, defaults:0"
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[DEBUG] Detector configuration updated",
        {
          "newCacheSize": 10000,
          "strategiesCount": 5,
          "hashAlgorithm": "fnv1a"
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "cacheEnabled": true,
          "deviceScoreThresholds": {
            "lowEnd": 30,
            "highEnd": 70
          },
          "hashAlgorithm": "fnv1a",
          "message": "Client detection service configured"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "maxCacheSize": 10000,
          "message": "Optimized client detection service configured"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "message": "Using optimized client detection service with request-scoped caching"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "Client detection service set"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "serviceCount": 8,
          "services": "configuration, logging, storage, transformation, cache, debug, clientDetection, auth",
          "environment": "production",
          "message": "Service container initialized with all services"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "message": "Performance baseline tracking initialized"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "Starting measurement: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "message": "Worker initialized with logging level DEBUG"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[DEBUG] Detector configuration set",
        {
          "cacheSize": 10000,
          "strategies": [
            "clientHints",
            "acceptHeader",
            "userAgent",
            "staticData",
            "defaults"
          ],
          "logLevel": "info"
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "cacheSize": 10000,
          "strategies": "clientHints, acceptHeader, userAgent, staticData, defaults",
          "hashAlgorithm": "fnv1a",
          "message": "Client detector initialized with configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "method": "GET",
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
          "message": "BREADCRUMB: Request started"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "Starting measurement: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "Starting operation: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "Starting measurement: akamai_compat"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "Starting operation: akamai_compat"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "advancedFeatures": "enabled",
          "message": "Akamai compatibility is enabled, checking URL format"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "No Akamai parameters detected in URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "used": false,
          "message": "Completed measurement: akamai_compat - 0ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "used": false,
          "message": "Performance: core:akamai_compat - 0ms (avg: 0.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "Starting measurement: image_request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "message": "Starting operation: image_request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Parsing image path",
        {
          "pathname": "/Oliwka_1.JPG"
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Finished parsing image path",
        {
          "imagePath": "/Oliwka_1.JPG",
          "optionsCount": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Applying path transforms",
        {
          "imagePath": "/Oliwka_1.JPG",
          "transformCount": 3
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: No matching transform found for segment",
        {
          "segment": "Oliwka_1.JPG"
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Parsing query options",
        {
          "paramCount": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed parsing query options",
        {
          "optionCount": 0,
          "hasWidth": false,
          "hasHeight": false,
          "hasFormat": false,
          "hasBlur": false,
          "hasFlip": false,
          "flipValue": "undefined"
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "derivatives": "avatar, banner, header, product, thumbnail",
          "count": 5,
          "pathname": "/Oliwka_1.JPG",
          "message": "Available derivatives"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Extracting derivative from path",
        {
          "pathname": "/Oliwka_1.JPG",
          "availableDerivatives": 5
        }
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: No derivative found in path",
        ""
      ],
      "level": "log",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Executing transform image command"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "imagePath": "/Oliwka_1.JPG",
          "options": "",
          "requestId": "5jrlvkdt",
          "via": "",
          "cfWorker": "",
          "alreadyProcessed": "",
          "possibleDuplicate": false,
          "message": "BREADCRUMB: Starting image transformation command"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "imagePath": "/Oliwka_1.JPG",
          "message": "BREADCRUMB: Fetching image from storage"
        }
      ],
      "level": "info",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "storagePriority": "remote,fallback",
          "r2Enabled": true,
          "hasRemoteUrl": true,
          "hasFallbackUrl": true,
          "message": "Fetching image from storage with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "remoteUrl": "https://cdn.erfianugrah.com",
          "message": "Fetching from remote with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "originalPath": "/Oliwka_1.JPG",
          "transformedPath": "Oliwka_1.JPG",
          "message": "Remote path after transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "type": "aws-s3",
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Remote auth enabled"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 50,
          "accessKeyVar": "AWS_ACCESS_KEY_ID",
          "secretKeyVar": "AWS_SECRET_ACCESS_KEY",
          "message": "AWS credentials not found"
        }
      ],
      "level": "error",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "fallbackUrl": "https://cdn.erfianugrah.com",
          "message": "Fetching from fallback with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "originalPath": "/Oliwka_1.JPG",
          "transformedPath": "Oliwka_1.JPG",
          "message": "Fallback path after transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Fallback auth not enabled for this URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656063,
          "level": 20,
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Fetching from fallback URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656063
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "contentType": "image/jpeg",
          "size": 5730693,
          "status": 200,
          "message": "Successfully fetched image from fallback"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "size": 5730693,
          "durationMs": 36,
          "message": "BREADCRUMB: Storage fetch completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "options": "",
          "message": "BREADCRUMB: Starting image transformation"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "optionsKeys": [],
          "hasClientDetection": true,
          "message": "Starting image transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "message": "Optimizing transformation options with client detection"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "message": "Cache miss for optimized options, generating"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "baseOptions": "",
          "message": "Getting optimized transformation options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[DEBUG] Using User-Agent for detection",
        {
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
          "maxLength": 100
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "deviceType": "desktop",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": true,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "avif,webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Starting optimized transformation selection",
        {
          "requestUrl": "https://images.erfi.dev/Oliwka_1.JPG",
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0",
          "hasAcceptHeader": true,
          "hasSaveData": false,
          "hasClientHints": false,
          "optionsProvided": "none"
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Initial optimizations from client hints",
        {
          "hasFormat": false,
          "hasQuality": true,
          "hasDpr": false,
          "hasWidth": false,
          "hasHeight": false,
          "optimizedParams": "networkQuality,deviceCapabilities,performanceBudget,quality"
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Determining optimized format using cascading priority",
        {
          "autoFormat": true,
          "cascadeEnabled": true,
          "acceptHeaderSource": false,
          "browserSource": "user-agent",
          "avifSupport": true,
          "webpSupport": true
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[DEBUG] Format selected based on browser-detection",
        {
          "format": "avif",
          "source": "user-agent",
          "priority": 60
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Format selection decision",
        {
          "format": "avif",
          "decisionSource": "user-agent",
          "decisionMethod": "browser-detection",
          "decisionTier": "browser-detection",
          "configuredPriority": 60
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed cascading decisions for optimization",
        {
          "cascadeComplete": true,
          "hasCascadedFormat": true,
          "hasCascadedQuality": true,
          "hasCascadedDimensions": false,
          "deviceTypeUsed": "desktop",
          "deviceScoreUsed": 50,
          "networkTierUsed": "unknown",
          "detectionTime": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "optimizedFormat": "avif",
          "optimizedQuality": 75,
          "optimizationApplied": true,
          "message": "Applied client optimized options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Building transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "imageSize": 5730693,
          "contentType": "image/jpeg",
          "optionsProvided": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo",
          "message": "BREADCRUMB: buildTransformOptions started"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Using client detection service for options optimization"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "message": "Cache miss for optimized options, generating"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "baseOptions": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo",
          "message": "Getting optimized transformation options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "deviceType": "desktop",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": true,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "avif,webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Starting optimized transformation selection",
        {
          "requestUrl": "https://images.erfi.dev/Oliwka_1.JPG",
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0",
          "hasAcceptHeader": true,
          "hasSaveData": false,
          "hasClientHints": false,
          "optionsProvided": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo"
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Initial optimizations from client hints",
        {
          "hasFormat": false,
          "hasQuality": false,
          "hasDpr": false,
          "hasWidth": false,
          "hasHeight": false,
          "optimizedParams": "networkQuality,deviceCapabilities,performanceBudget"
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed cascading decisions for optimization",
        {
          "cascadeComplete": true,
          "hasCascadedFormat": false,
          "hasCascadedQuality": false,
          "hasCascadedDimensions": false,
          "deviceTypeUsed": "desktop",
          "deviceScoreUsed": 50,
          "networkTierUsed": "unknown",
          "detectionTime": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "detectionTime": "0ms",
          "originalFormat": "avif",
          "optimizedFormat": "avif",
          "message": "Client detection optimization completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "hasWidth": false,
          "autoWidth": false,
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
          "viewportWidth": "unknown",
          "deviceType": "desktop",
          "message": "BREADCRUMB: Calculating responsive width"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "calculatedWidth": 1440,
          "durationMs": 0,
          "message": "BREADCRUMB: Responsive width calculated"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "width": 1440,
          "message": "BREADCRUMB: Applied responsive width"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "finalOptionsCount": 10,
          "hasWidth": true,
          "hasHeight": false,
          "width": 1440,
          "format": "avif",
          "quality": 75,
          "fit": "scale-down",
          "allParams": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo,width,fit,metadata",
          "message": "BREADCRUMB: buildTransformOptions completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "networkQuality": {
            "tier": "unknown",
            "description": "No network information available",
            "estimated": true
          },
          "deviceCapabilities": {
            "description": "Standard device Windows",
            "estimated": false,
            "mobile": false,
            "platform": "Windows",
            "score": 50
          },
          "performanceBudget": {
            "quality": {
              "min": 60,
              "max": 85,
              "target": 75
            },
            "maxWidth": 1500,
            "maxHeight": 1500,
            "preferredFormat": "auto",
            "dpr": 1
          },
          "quality": 75,
          "format": "avif",
          "__detectionMetrics": {
            "browser": "firefox 136.0",
            "deviceScore": 50,
            "deviceMemory": 4,
            "deviceProcessors": 4,
            "networkQuality": "unknown",
            "detectionTime": 0,
            "cascadeResults": {
              "formatDecision": {
                "finalFormat": "avif",
                "source": "user-agent",
                "avifSupported": true,
                "webpSupported": true
              },
              "qualityDecision": {
                "finalQuality": 75,
                "source": "cascade-system",
                "networkTier": "unknown",
                "deviceScore": 50
              },
              "responsiveResults": {
                "dpr": 1
              }
            },
            "source": {
              "browser": "user-agent",
              "formats": "user-agent"
            },
            "configuredHash": "fnv1a",
            "cacheEnabled": true
          },
          "__clientInfo": {
            "deviceType": "desktop",
            "networkQuality": "unknown",
            "deviceClassification": "mid-range",
            "saveData": false,
            "formatSupport": {
              "webp": true,
              "avif": true
            }
          },
          "width": 1440,
          "fit": "scale-down",
          "metadata": "none",
          "durationMs": 0,
          "message": "BREADCRUMB: Built transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "networkQuality": {
            "tier": "unknown",
            "description": "No network information available",
            "estimated": true
          },
          "deviceCapabilities": {
            "description": "Standard device Windows",
            "estimated": false,
            "mobile": false,
            "platform": "Windows",
            "score": 50
          },
          "performanceBudget": {
            "quality": {
              "min": 60,
              "max": 85,
              "target": 75
            },
            "maxWidth": 1500,
            "maxHeight": 1500,
            "preferredFormat": "auto",
            "dpr": 1
          },
          "quality": 75,
          "format": "avif",
          "__detectionMetrics": {
            "browser": "firefox 136.0",
            "deviceScore": 50,
            "deviceMemory": 4,
            "deviceProcessors": 4,
            "networkQuality": "unknown",
            "detectionTime": 0,
            "cascadeResults": {
              "formatDecision": {
                "finalFormat": "avif",
                "source": "user-agent",
                "avifSupported": true,
                "webpSupported": true
              },
              "qualityDecision": {
                "finalQuality": 75,
                "source": "cascade-system",
                "networkTier": "unknown",
                "deviceScore": 50
              },
              "responsiveResults": {
                "dpr": 1
              }
            },
            "source": {
              "browser": "user-agent",
              "formats": "user-agent"
            },
            "configuredHash": "fnv1a",
            "cacheEnabled": true
          },
          "__clientInfo": {
            "deviceType": "desktop",
            "networkQuality": "unknown",
            "deviceClassification": "mid-range",
            "saveData": false,
            "formatSupport": {
              "webp": true,
              "avif": true
            }
          },
          "width": 1440,
          "fit": "scale-down",
          "metadata": "none",
          "message": "Transform options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Applying cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "message": "Using CacheService for applying Cloudflare cache settings"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "hasOptions": true,
          "cfMethod": "cf",
          "cacheEverything": true,
          "message": "Applying Cloudflare cache settings"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cacheTagsEnabled": true,
          "hasImagePath": true,
          "hasOptions": true,
          "message": "BREADCRUMB: Checking cache tag generation requirements"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "sourceType": "remote",
          "hasOptions": true,
          "message": "Generating cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "tagCount": 2,
          "message": "BREADCRUMB: Adding custom tags from configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "pathBasedTagsCount": 5,
          "message": "BREADCRUMB: Processing path-based tags"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "tagCount": 10,
          "generationTime": 0,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-avif, img-prod-width-1440, img-prod-quality-75, img-prod-prod...",
          "message": "Generated cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "tagCount": 10,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-avif, img-prod-width-1440...",
          "message": "Generated cache tags for Cloudflare fetch API"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "ttl": 604800,
          "message": "BREADCRUMB: Using simple cacheTtl"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "mode": "cacheTtl",
          "ttl": "604800s",
          "note": "All status codes will use this TTL in Cloudflare cache",
          "message": "Simple cache TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 20,
          "tagCount": 10,
          "firstFewTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-avif, img-prod-width-1440, img-prod-quality-75, img-prod-prod...",
          "message": "Adding cache tags to Cloudflare request CF object"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cacheEverything": true,
          "hasCacheTtl": true,
          "hasCacheTtlByStatus": false,
          "tagCount": 10,
          "durationMs": 0,
          "message": "BREADCRUMB: Applied Cloudflare cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "durationMs": 0,
          "message": "BREADCRUMB: Applied cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "imageSize": 5730693,
          "transformOptionsCount": 10,
          "message": "BREADCRUMB: Starting Cloudflare image transformation"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cfOptions": "{\"image\":{\"networkQuality\":{\"tier\":\"unknown\",\"description\":\"No network information available\",\"estimated\":true},\"deviceCapabilities\":{\"description\":\"Standard device Windows\",\"estimated\":false,\"mobile\":false,\"platform\":\"Windows\",\"score\":50},\"performanceBudget\":{\"quality\":{\"min\":60,\"max\":85,\"target\":75},\"maxWidth\":1500,\"maxHeight\":1500,\"preferredFormat\":\"auto\",\"dpr\":1},\"quality\":75,\"format\":\"avif\",\"__detectionMetrics\":{\"browser\":\"firefox 136.0\",\"deviceScore\":50,\"deviceMemory\":4,\"deviceProcessors\":4,\"networkQuality\":\"unknown\",\"detectionTime\":0,\"cascadeResults\":{\"formatDecision\":{\"finalFormat\":\"avif\",\"source\":\"user-agent\",\"avifSupported\":true,\"webpSupported\":true},\"qualityDecision\":{\"finalQuality\":75,\"source\":\"cascade-system\",\"networkTier\":\"unknown\",\"deviceScore\":50},\"responsiveResults\":{\"dpr\":1}},\"source\":{\"browser\":\"user-agent\",\"formats\":\"user-agent\"},\"configuredHash\":\"fnv1a\",\"cacheEnabled\":true},\"__clientInfo\":{\"deviceType\":\"desktop\",\"networkQuality\":\"unknown\",\"deviceClassification\":\"mid-range\",\"saveData\":false,\"formatSupport\":{\"webp\":true,\"avif\":true}},\"width\":1440,\"fit\":\"scale-down\",\"metadata\":\"none\"},\"cacheEverything\":true,\"cacheTtl\":604800,\"cacheMode\":\"simple\",\"simpleTtl\":604800,\"cacheTags\":[\"img-prod-path-Oliwka_1-JPG\",\"img-prod-format-avif\",\"img-prod-width-1440\",\"img-prod-quality-75\",\"img-prod-prod\",\"img-prod-site1\",\"img-prod-origin-remote\",\"img-prod-method-get\",\"img-prod-status-success\",\"img-prod-code-200\"]}",
          "hasWidth": true,
          "hasHeight": false,
          "hasFit": true,
          "fit": "scale-down",
          "format": "avif",
          "quality": 75,
          "imageSourceSize": "5596KB",
          "message": "BREADCRUMB: CF image transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Creating fetch promise with CF options"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "durationMs": 0,
          "message": "BREADCRUMB: Fetch promise created"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656099,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Awaiting CF transformation result"
        }
      ],
      "level": "info",
      "timestamp": 1742991656099
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentType": "image/webp",
          "raceTime": 11,
          "totalTime": 11,
          "durationMs": 11,
          "message": "BREADCRUMB: Cloudflare transformation completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Creating final response"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "cacheControl": "public, max-age=604800",
          "message": "Added cache control headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0",
          "message": "BREADCRUMB: Added client hints headers to response"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentType": "image/webp",
          "durationMs": 11,
          "message": "BREADCRUMB: Image transformation completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Applying cache headers with smart options"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "cacheMethod": "cf",
          "status": 200,
          "contentType": "image/webp",
          "hasOptions": false,
          "message": "Applying cache headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "hasStorageResult": true,
          "message": "Calculating TTL for response"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "originMaxAge": 604800,
          "originalTtl": 604800,
          "message": "Using origin max-age for TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "staleTime": 302400,
          "newCacheControl": "public, max-age=604800, stale-while-revalidate=302400",
          "message": "Added stale-while-revalidate directive"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "ttl": 604800,
          "status": 200,
          "contentType": "image/webp",
          "derivative": "none",
          "quality": "default",
          "message": "Calculated final TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "sourceType": "fallback",
          "hasOptions": false,
          "message": "Generating cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "tagCount": 2,
          "message": "BREADCRUMB: Adding custom tags from configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "pathBasedTagsCount": 5,
          "message": "BREADCRUMB: Processing path-based tags"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "tagCount": 14,
          "generationTime": 0,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1, img-prod-type-image, img-prod-subtype-jpeg...",
          "message": "Generated cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "tagCount": 14,
          "firstFewTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1...",
          "message": "Added cache tags to response via Cache-Tag header"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "cacheControl": "public, max-age=604800, stale-while-revalidate=302400, no-transform, stale-if-error=86400",
          "cacheTagHeader": "img-prod-path-Oliwka_1-JPG,img-prod-prod,img-prod-site1,img-prod-type-image,img-prod-subtype-jpeg,img-prod-cc-public,img-prod-cc-max-age-long,img-prod-origin-fallback,img-prod-method-get,img-prod-status-success,img-prod-code-200,img-prod-mime-image,img-prod-imgfmt-jpeg,img-prod-size-huge",
          "status": 200,
          "ttl": 604800,
          "message": "Applied enhanced cache headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "debugEnabledInConfig": true,
          "environment": "production",
          "forceDebugHeaders": false,
          "message": "BREADCRUMB: Checking if debug is enabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugConfig": {
            "enabled": true,
            "forceDebugHeaders": false,
            "allowedEnvironmentsStr": "",
            "environment": "production",
            "headersStr": "cache,mode",
            "verbose": false,
            "isDebugQueryParam": false
          },
          "message": "Debug mode enabled for request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "message": "Cache miss for client info, detecting"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "deviceType": "desktop",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": true,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "avif,webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "deviceType": "desktop",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "message": "Detected client info for debug headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "debugEnabledInConfig": true,
          "environment": "production",
          "forceDebugHeaders": false,
          "message": "BREADCRUMB: Checking if debug is enabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugConfig": {
            "enabled": true,
            "forceDebugHeaders": false,
            "allowedEnvironmentsStr": "",
            "environment": "production",
            "headersStr": "cache,mode",
            "verbose": false,
            "isDebugQueryParam": false
          },
          "message": "Debug mode enabled for request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugEnabled": true,
          "headerCategories": [
            "cache",
            "mode"
          ],
          "transformOptions": [],
          "metricsAvailable": true,
          "message": "Adding enhanced debug headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "message": "No cache bypass conditions detected"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Caching response with enhanced strategy"
        }
      ],
      "level": "info",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "message": "No cache bypass conditions detected"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656110,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "cacheMethod": "cf",
          "hasOptions": false,
          "message": "Starting cache with fallback process"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656110
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "cacheMethod": "cf",
          "status": 200,
          "contentType": "image/webp",
          "hasOptions": false,
          "message": "Applying cache headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "hasStorageResult": true,
          "message": "Calculating TTL for response"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "originMaxAge": 604800,
          "originalTtl": 604800,
          "message": "Using origin max-age for TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "ttl": 604800,
          "status": 200,
          "contentType": "image/webp",
          "derivative": "none",
          "quality": "default",
          "message": "Calculated final TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "sourceType": "fallback",
          "hasOptions": false,
          "message": "Generating cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "tagCount": 2,
          "message": "BREADCRUMB: Adding custom tags from configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "pathBasedTagsCount": 5,
          "message": "BREADCRUMB: Processing path-based tags"
        }
      ],
      "level": "info",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "tagCount": 14,
          "generationTime": 0,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1, img-prod-type-image, img-prod-subtype-jpeg...",
          "message": "Generated cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "tagCount": 14,
          "firstFewTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1...",
          "message": "Added cache tags to response via Cache-Tag header"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "cacheControl": "public, max-age=604800, stale-while-revalidate=302400, no-transform, stale-if-error=86400",
          "cacheTagHeader": "img-prod-path-Oliwka_1-JPG,img-prod-prod,img-prod-site1,img-prod-type-image,img-prod-subtype-jpeg,img-prod-cc-public,img-prod-cc-max-age-long,img-prod-origin-fallback,img-prod-method-get,img-prod-status-success,img-prod-code-200,img-prod-mime-image,img-prod-imgfmt-jpeg,img-prod-size-huge",
          "status": 200,
          "ttl": 604800,
          "message": "Applied enhanced cache headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "status": 200,
          "message": "Storing in cache background"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "sourceType": "remote",
          "hasOptions": false,
          "message": "Generating cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "tagCount": 2,
          "message": "BREADCRUMB: Adding custom tags from configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "pathBasedTagsCount": 5,
          "message": "BREADCRUMB: Processing path-based tags"
        }
      ],
      "level": "info",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "tagCount": 12,
          "generationTime": 0,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1, img-prod-type-text, img-prod-subtype-plain...",
          "message": "Generated cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "tagCount": 12,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1...",
          "message": "Adding cache tags to request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentLength": "368282",
          "contentType": "image/webp",
          "totalDurationMs": 62,
          "durationMs": 62,
          "message": "BREADCRUMB: Transform image command completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "message": "Completed measurement: image_request - 62ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "message": "Performance: core:image_request - 62ms (avg: 353.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "message": "Completed measurement: total - 62ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "message": "Performance: core:total - 62ms (avg: 353.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "368282",
          "message": "Completed measurement: total - 62ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "368282",
          "storage": 36,
          "transform": 11,
          "detection": 0,
          "total": 62,
          "message": "Request completed in 62ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656125,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "368282",
          "message": "Performance: request:total - 62ms (avg: 353.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656125
    },
    {
      "message": [
        {
          "time": 1742991656140,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "usedTags": true,
          "message": "Successfully stored in cache background"
        }
      ],
      "level": "debug",
      "timestamp": 1742991656140
    }
  ],
  "eventTimestamp": 1742991656063,
  "event": {
    "request": {
      "url": "https://images.erfi.dev/Oliwka_1.JPG",
      "method": "GET",
      "headers": {
        "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
        "accept-encoding": "gzip, br",
        "accept-language": "en-GB,en;q=0.5",
        "alt-used": "images.erfi.dev",
        "cf-connecting-ip": "195.240.81.42",
        "cf-device-type": "desktop",
        "cf-ipcountry": "NL",
        "cf-ray": "92669ada5e390a57",
        "cf-visitor": "{\"scheme\":\"https\"}",
        "connection": "Keep-Alive",
        "cookie": "REDACTED",
        "host": "images.erfi.dev",
        "if-none-match": "\"cfwGKVHv1SPGAhzMbwPQ8iV9JKfIt1rjmZ5QfTUockDQ:d52cdb9e50b6ce820691fb3502dbb74e\"",
        "priority": "u=0, i",
        "sec-fetch-dest": "document",
        "sec-fetch-mode": "navigate",
        "sec-fetch-site": "cross-site",
        "sec-gpc": "1",
        "upgrade-insecure-requests": "1",
        "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
        "x-forwarded-proto": "https",
        "x-real-ip": "195.240.81.42"
      },
      "cf": {
        "requestHeaderNames": {},
        "httpProtocol": "HTTP/3",
        "tlsCipher": "AEAD-AES128-GCM-SHA256",
        "continent": "EU",
        "asn": 1136,
        "clientAcceptEncoding": "gzip, deflate, br, zstd",
        "country": "NL",
        "isEUCountry": "1",
        "latitude": "51.71320",
        "verifiedBotCategory": "",
        "botManagement": {
          "jsDetection": {
            "passed": false
          },
          "ja4Signals": {
            "h2h3_ratio_1h": 1,
            "heuristic_ratio_1h": 0.00019535397586878,
            "reqs_quantile_1h": 0.99996101856232,
            "uas_rank_1h": 314,
            "browser_ratio_1h": 0.9880456328392,
            "paths_rank_1h": 34,
            "reqs_rank_1h": 39,
            "cache_ratio_1h": 0.51640945672989,
            "ips_rank_1h": 34,
            "ips_quantile_1h": 0.99996602535248
          },
          "staticResource": false,
          "corporateProxy": false,
          "ja4": "q13d0314h3_55b375c5d22e_61e396c58b1f",
          "verifiedBot": false,
          "ja3Hash": "e67b61f79c58a27dc679bc15e8b94b0a",
          "score": 99,
          "detectionIds": {}
        },
        "tlsClientAuth": {
          "certIssuerDNLegacy": "",
          "certIssuerSKI": "",
          "certSubjectDNRFC2253": "",
          "certSubjectDNLegacy": "",
          "certFingerprintSHA256": "",
          "certNotBefore": "",
          "certSKI": "",
          "certSerial": "",
          "certIssuerDN": "",
          "certVerified": "NONE",
          "certNotAfter": "",
          "certSubjectDN": "",
          "certPresented": "0",
          "certRevoked": "0",
          "certIssuerSerial": "",
          "certIssuerDNRFC2253": "",
          "certFingerprintSHA1": ""
        },
        "requestPriority": "",
        "tlsVersion": "TLSv1.3",
        "colo": "AMS",
        "timezone": "Europe/Amsterdam",
        "city": "Rosmalen",
        "region": "North Brabant",
        "edgeRequestKeepAliveStatus": 1,
        "tlsClientRandom": "PApCMmYvDvFd4Vhggsv28BOvFWDPcQF7ZjsvPgyoV6I=",
        "longitude": "5.36610",
        "clientTrustScore": 99,
        "postalCode": "5242",
        "regionCode": "NB",
        "asOrganization": "KPN",
        "tlsClientExtensionsSha1": "W+a0kO4MPEmxP/fjW5AAJ6U/6oI=",
        "tlsClientHelloLength": "1839"
      }
    },
    "response": {
      "status": 200
    }
  }
}
{
  "wallTime": 123,
  "cpuTime": 31,
  "truncated": false,
  "executionModel": "stateless",
  "outcome": "ok",
  "scriptVersion": {
    "id": "7d366527-c775-4b7e-a6f5-88293f5469c7"
  },
  "scriptName": "image-resizer-2-production",
  "diagnosticsChannelEvents": [],
  "exceptions": [],
  "logs": [
    {
      "message": [
        "Loaded custom derivatives from environment",
        {
          "derivatives": [
            "avatar",
            "banner",
            "header",
            "product",
            "thumbnail"
          ],
          "totalDerivatives": 5
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "message": "Auth service initialized with authentication disabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[DEBUG] Using default detector configuration as no config was provided",
        ""
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[DEBUG] Detector configuration set",
        {
          "cacheSize": 10000,
          "strategies": [
            "clientHints",
            "acceptHeader",
            "userAgent",
            "staticData",
            "defaults"
          ],
          "logLevel": "info"
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[DEBUG] Initialized detection strategies",
        {
          "count": 5,
          "enabled": "client-hints, accept-header, user-agent, static-data, defaults",
          "priorities": "client-hints:100, accept-header:80, user-agent:60, static-data:20, defaults:0"
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[DEBUG] Detector configuration updated",
        {
          "newCacheSize": 10000,
          "strategiesCount": 5,
          "hashAlgorithm": "fnv1a"
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "cacheEnabled": true,
          "deviceScoreThresholds": {
            "lowEnd": 30,
            "highEnd": 70
          },
          "hashAlgorithm": "fnv1a",
          "message": "Client detection service configured"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "maxCacheSize": 10000,
          "message": "Optimized client detection service configured"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "message": "Using optimized client detection service with request-scoped caching"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "Client detection service set"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "serviceCount": 8,
          "services": "configuration, logging, storage, transformation, cache, debug, clientDetection, auth",
          "environment": "production",
          "message": "Service container initialized with all services"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "message": "Performance baseline tracking initialized"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "Starting measurement: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "message": "Worker initialized with logging level DEBUG"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[DEBUG] Detector configuration set",
        {
          "cacheSize": 10000,
          "strategies": [
            "clientHints",
            "acceptHeader",
            "userAgent",
            "staticData",
            "defaults"
          ],
          "logLevel": "info"
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "cacheSize": 10000,
          "strategies": "clientHints, acceptHeader, userAgent, staticData, defaults",
          "hashAlgorithm": "fnv1a",
          "message": "Client detector initialized with configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "method": "GET",
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
          "message": "BREADCRUMB: Request started"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "Starting measurement: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "Starting operation: total"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "Starting measurement: akamai_compat"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "Starting operation: akamai_compat"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "advancedFeatures": "enabled",
          "message": "Akamai compatibility is enabled, checking URL format"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "No Akamai parameters detected in URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "used": false,
          "message": "Completed measurement: akamai_compat - 0ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "used": false,
          "message": "Performance: core:akamai_compat - 0ms (avg: 0.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "Starting measurement: image_request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "message": "Starting operation: image_request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Parsing image path",
        {
          "pathname": "/Oliwka_1.JPG"
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Finished parsing image path",
        {
          "imagePath": "/Oliwka_1.JPG",
          "optionsCount": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Applying path transforms",
        {
          "imagePath": "/Oliwka_1.JPG",
          "transformCount": 3
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: No matching transform found for segment",
        {
          "segment": "Oliwka_1.JPG"
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Parsing query options",
        {
          "paramCount": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed parsing query options",
        {
          "optionCount": 0,
          "hasWidth": false,
          "hasHeight": false,
          "hasFormat": false,
          "hasBlur": false,
          "hasFlip": false,
          "flipValue": "undefined"
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "derivatives": "avatar, banner, header, product, thumbnail",
          "count": 5,
          "pathname": "/Oliwka_1.JPG",
          "message": "Available derivatives"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Extracting derivative from path",
        {
          "pathname": "/Oliwka_1.JPG",
          "availableDerivatives": 5
        }
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: No derivative found in path",
        ""
      ],
      "level": "log",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Executing transform image command"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "imagePath": "/Oliwka_1.JPG",
          "options": "",
          "requestId": "uxeawf13",
          "via": "",
          "cfWorker": "",
          "alreadyProcessed": "",
          "possibleDuplicate": false,
          "message": "BREADCRUMB: Starting image transformation command"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "imagePath": "/Oliwka_1.JPG",
          "message": "BREADCRUMB: Fetching image from storage"
        }
      ],
      "level": "info",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "storagePriority": "remote,fallback",
          "r2Enabled": true,
          "hasRemoteUrl": true,
          "hasFallbackUrl": true,
          "message": "Fetching image from storage with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "remoteUrl": "https://cdn.erfianugrah.com",
          "message": "Fetching from remote with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "originalPath": "/Oliwka_1.JPG",
          "transformedPath": "Oliwka_1.JPG",
          "message": "Remote path after transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "type": "aws-s3",
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Remote auth enabled"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 50,
          "accessKeyVar": "AWS_ACCESS_KEY_ID",
          "secretKeyVar": "AWS_SECRET_ACCESS_KEY",
          "message": "AWS credentials not found"
        }
      ],
      "level": "error",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "fallbackUrl": "https://cdn.erfianugrah.com",
          "message": "Fetching from fallback with resilience"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "originalPath": "/Oliwka_1.JPG",
          "transformedPath": "Oliwka_1.JPG",
          "message": "Fallback path after transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Fallback auth not enabled for this URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657574,
          "level": 20,
          "url": "https://cdn.erfianugrah.com/Oliwka_1.JPG",
          "message": "Fetching from fallback URL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657574
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "imagePath": "/Oliwka_1.JPG",
          "contentType": "image/jpeg",
          "size": 5730693,
          "status": 200,
          "message": "Successfully fetched image from fallback"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "size": 5730693,
          "durationMs": 62,
          "message": "BREADCRUMB: Storage fetch completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "options": "",
          "message": "BREADCRUMB: Starting image transformation"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "sourceType": "fallback",
          "contentType": "image/jpeg",
          "optionsKeys": [],
          "hasClientDetection": true,
          "message": "Starting image transformation"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "message": "Optimizing transformation options with client detection"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "message": "Cache miss for optimized options, generating"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "baseOptions": "",
          "message": "Getting optimized transformation options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[DEBUG] Using User-Agent for detection",
        {
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
          "maxLength": 100
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "deviceType": "desktop",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": true,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "avif,webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Starting optimized transformation selection",
        {
          "requestUrl": "https://images.erfi.dev/Oliwka_1.JPG",
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0",
          "hasAcceptHeader": true,
          "hasSaveData": false,
          "hasClientHints": false,
          "optionsProvided": "none"
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Initial optimizations from client hints",
        {
          "hasFormat": false,
          "hasQuality": true,
          "hasDpr": false,
          "hasWidth": false,
          "hasHeight": false,
          "optimizedParams": "networkQuality,deviceCapabilities,performanceBudget,quality"
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Determining optimized format using cascading priority",
        {
          "autoFormat": true,
          "cascadeEnabled": true,
          "acceptHeaderSource": false,
          "browserSource": "user-agent",
          "avifSupport": true,
          "webpSupport": true
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[DEBUG] Format selected based on browser-detection",
        {
          "format": "avif",
          "source": "user-agent",
          "priority": 60
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Format selection decision",
        {
          "format": "avif",
          "decisionSource": "user-agent",
          "decisionMethod": "browser-detection",
          "decisionTier": "browser-detection",
          "configuredPriority": 60
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed cascading decisions for optimization",
        {
          "cascadeComplete": true,
          "hasCascadedFormat": true,
          "hasCascadedQuality": true,
          "hasCascadedDimensions": false,
          "deviceTypeUsed": "desktop",
          "deviceScoreUsed": 50,
          "networkTierUsed": "unknown",
          "detectionTime": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "optimizedFormat": "avif",
          "optimizedQuality": 75,
          "optimizationApplied": true,
          "message": "Applied client optimized options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Building transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "imageSize": 5730693,
          "contentType": "image/jpeg",
          "optionsProvided": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo",
          "message": "BREADCRUMB: buildTransformOptions started"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Using client detection service for options optimization"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "message": "Cache miss for optimized options, generating"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "baseOptions": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo",
          "message": "Getting optimized transformation options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "deviceType": "desktop",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": true,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "avif,webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Starting optimized transformation selection",
        {
          "requestUrl": "https://images.erfi.dev/Oliwka_1.JPG",
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0",
          "hasAcceptHeader": true,
          "hasSaveData": false,
          "hasClientHints": false,
          "optionsProvided": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo"
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Initial optimizations from client hints",
        {
          "hasFormat": false,
          "hasQuality": false,
          "hasDpr": false,
          "hasWidth": false,
          "hasHeight": false,
          "optimizedParams": "networkQuality,deviceCapabilities,performanceBudget"
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        "[INFO] ðŸ”¶ BREADCRUMB: Completed cascading decisions for optimization",
        {
          "cascadeComplete": true,
          "hasCascadedFormat": false,
          "hasCascadedQuality": false,
          "hasCascadedDimensions": false,
          "deviceTypeUsed": "desktop",
          "deviceScoreUsed": 50,
          "networkTierUsed": "unknown",
          "detectionTime": 0
        }
      ],
      "level": "log",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "detectionTime": "0ms",
          "originalFormat": "avif",
          "optimizedFormat": "avif",
          "message": "Client detection optimization completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "hasWidth": false,
          "autoWidth": false,
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
          "viewportWidth": "unknown",
          "deviceType": "desktop",
          "message": "BREADCRUMB: Calculating responsive width"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "calculatedWidth": 1440,
          "durationMs": 0,
          "message": "BREADCRUMB: Responsive width calculated"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "width": 1440,
          "message": "BREADCRUMB: Applied responsive width"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "finalOptionsCount": 10,
          "hasWidth": true,
          "hasHeight": false,
          "width": 1440,
          "format": "avif",
          "quality": 75,
          "fit": "scale-down",
          "allParams": "networkQuality,deviceCapabilities,performanceBudget,quality,format,__detectionMetrics,__clientInfo,width,fit,metadata",
          "message": "BREADCRUMB: buildTransformOptions completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "networkQuality": {
            "tier": "unknown",
            "description": "No network information available",
            "estimated": true
          },
          "deviceCapabilities": {
            "description": "Standard device Windows",
            "estimated": false,
            "mobile": false,
            "platform": "Windows",
            "score": 50
          },
          "performanceBudget": {
            "quality": {
              "min": 60,
              "max": 85,
              "target": 75
            },
            "maxWidth": 1500,
            "maxHeight": 1500,
            "preferredFormat": "auto",
            "dpr": 1
          },
          "quality": 75,
          "format": "avif",
          "__detectionMetrics": {
            "browser": "firefox 136.0",
            "deviceScore": 50,
            "deviceMemory": 4,
            "deviceProcessors": 4,
            "networkQuality": "unknown",
            "detectionTime": 0,
            "cascadeResults": {
              "formatDecision": {
                "finalFormat": "avif",
                "source": "user-agent",
                "avifSupported": true,
                "webpSupported": true
              },
              "qualityDecision": {
                "finalQuality": 75,
                "source": "cascade-system",
                "networkTier": "unknown",
                "deviceScore": 50
              },
              "responsiveResults": {
                "dpr": 1
              }
            },
            "source": {
              "browser": "user-agent",
              "formats": "user-agent"
            },
            "configuredHash": "fnv1a",
            "cacheEnabled": true
          },
          "__clientInfo": {
            "deviceType": "desktop",
            "networkQuality": "unknown",
            "deviceClassification": "mid-range",
            "saveData": false,
            "formatSupport": {
              "webp": true,
              "avif": true
            }
          },
          "width": 1440,
          "fit": "scale-down",
          "metadata": "none",
          "durationMs": 0,
          "message": "BREADCRUMB: Built transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "networkQuality": {
            "tier": "unknown",
            "description": "No network information available",
            "estimated": true
          },
          "deviceCapabilities": {
            "description": "Standard device Windows",
            "estimated": false,
            "mobile": false,
            "platform": "Windows",
            "score": 50
          },
          "performanceBudget": {
            "quality": {
              "min": 60,
              "max": 85,
              "target": 75
            },
            "maxWidth": 1500,
            "maxHeight": 1500,
            "preferredFormat": "auto",
            "dpr": 1
          },
          "quality": 75,
          "format": "avif",
          "__detectionMetrics": {
            "browser": "firefox 136.0",
            "deviceScore": 50,
            "deviceMemory": 4,
            "deviceProcessors": 4,
            "networkQuality": "unknown",
            "detectionTime": 0,
            "cascadeResults": {
              "formatDecision": {
                "finalFormat": "avif",
                "source": "user-agent",
                "avifSupported": true,
                "webpSupported": true
              },
              "qualityDecision": {
                "finalQuality": 75,
                "source": "cascade-system",
                "networkTier": "unknown",
                "deviceScore": 50
              },
              "responsiveResults": {
                "dpr": 1
              }
            },
            "source": {
              "browser": "user-agent",
              "formats": "user-agent"
            },
            "configuredHash": "fnv1a",
            "cacheEnabled": true
          },
          "__clientInfo": {
            "deviceType": "desktop",
            "networkQuality": "unknown",
            "deviceClassification": "mid-range",
            "saveData": false,
            "formatSupport": {
              "webp": true,
              "avif": true
            }
          },
          "width": 1440,
          "fit": "scale-down",
          "metadata": "none",
          "message": "Transform options"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Applying cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "message": "Using CacheService for applying Cloudflare cache settings"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "hasOptions": true,
          "cfMethod": "cf",
          "cacheEverything": true,
          "message": "Applying Cloudflare cache settings"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cacheTagsEnabled": true,
          "hasImagePath": true,
          "hasOptions": true,
          "message": "BREADCRUMB: Checking cache tag generation requirements"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "sourceType": "remote",
          "hasOptions": true,
          "message": "Generating cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "tagCount": 2,
          "message": "BREADCRUMB: Adding custom tags from configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "pathBasedTagsCount": 5,
          "message": "BREADCRUMB: Processing path-based tags"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "tagCount": 10,
          "generationTime": 0,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-avif, img-prod-width-1440, img-prod-quality-75, img-prod-prod...",
          "message": "Generated cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "tagCount": 10,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-avif, img-prod-width-1440...",
          "message": "Generated cache tags for Cloudflare fetch API"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "ttl": 604800,
          "message": "BREADCRUMB: Using simple cacheTtl"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "mode": "cacheTtl",
          "ttl": "604800s",
          "note": "All status codes will use this TTL in Cloudflare cache",
          "message": "Simple cache TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 20,
          "tagCount": 10,
          "firstFewTags": "img-prod-path-Oliwka_1-JPG, img-prod-format-avif, img-prod-width-1440, img-prod-quality-75, img-prod-prod...",
          "message": "Adding cache tags to Cloudflare request CF object"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cacheEverything": true,
          "hasCacheTtl": true,
          "hasCacheTtlByStatus": false,
          "tagCount": 10,
          "durationMs": 0,
          "message": "BREADCRUMB: Applied Cloudflare cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "durationMs": 0,
          "message": "BREADCRUMB: Applied cache settings"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "imageSize": 5730693,
          "transformOptionsCount": 10,
          "message": "BREADCRUMB: Starting Cloudflare image transformation"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "cfOptions": "{\"image\":{\"networkQuality\":{\"tier\":\"unknown\",\"description\":\"No network information available\",\"estimated\":true},\"deviceCapabilities\":{\"description\":\"Standard device Windows\",\"estimated\":false,\"mobile\":false,\"platform\":\"Windows\",\"score\":50},\"performanceBudget\":{\"quality\":{\"min\":60,\"max\":85,\"target\":75},\"maxWidth\":1500,\"maxHeight\":1500,\"preferredFormat\":\"auto\",\"dpr\":1},\"quality\":75,\"format\":\"avif\",\"__detectionMetrics\":{\"browser\":\"firefox 136.0\",\"deviceScore\":50,\"deviceMemory\":4,\"deviceProcessors\":4,\"networkQuality\":\"unknown\",\"detectionTime\":0,\"cascadeResults\":{\"formatDecision\":{\"finalFormat\":\"avif\",\"source\":\"user-agent\",\"avifSupported\":true,\"webpSupported\":true},\"qualityDecision\":{\"finalQuality\":75,\"source\":\"cascade-system\",\"networkTier\":\"unknown\",\"deviceScore\":50},\"responsiveResults\":{\"dpr\":1}},\"source\":{\"browser\":\"user-agent\",\"formats\":\"user-agent\"},\"configuredHash\":\"fnv1a\",\"cacheEnabled\":true},\"__clientInfo\":{\"deviceType\":\"desktop\",\"networkQuality\":\"unknown\",\"deviceClassification\":\"mid-range\",\"saveData\":false,\"formatSupport\":{\"webp\":true,\"avif\":true}},\"width\":1440,\"fit\":\"scale-down\",\"metadata\":\"none\"},\"cacheEverything\":true,\"cacheTtl\":604800,\"cacheMode\":\"simple\",\"simpleTtl\":604800,\"cacheTags\":[\"img-prod-path-Oliwka_1-JPG\",\"img-prod-format-avif\",\"img-prod-width-1440\",\"img-prod-quality-75\",\"img-prod-prod\",\"img-prod-site1\",\"img-prod-origin-remote\",\"img-prod-method-get\",\"img-prod-status-success\",\"img-prod-code-200\"]}",
          "hasWidth": true,
          "hasHeight": false,
          "hasFit": true,
          "fit": "scale-down",
          "format": "avif",
          "quality": 75,
          "imageSourceSize": "5596KB",
          "message": "BREADCRUMB: CF image transform options"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Creating fetch promise with CF options"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "durationMs": 0,
          "message": "BREADCRUMB: Fetch promise created"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657636,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Awaiting CF transformation result"
        }
      ],
      "level": "info",
      "timestamp": 1742991657636
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentType": "image/webp",
          "raceTime": 32,
          "totalTime": 32,
          "durationMs": 32,
          "message": "BREADCRUMB: Cloudflare transformation completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Creating final response"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "cacheControl": "public, max-age=604800",
          "message": "Added cache control headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0",
          "message": "BREADCRUMB: Added client hints headers to response"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentType": "image/webp",
          "durationMs": 32,
          "message": "BREADCRUMB: Image transformation completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "message": "BREADCRUMB: Applying cache headers with smart options"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "cacheMethod": "cf",
          "status": 200,
          "contentType": "image/webp",
          "hasOptions": false,
          "message": "Applying cache headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "hasStorageResult": true,
          "message": "Calculating TTL for response"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "originMaxAge": 604800,
          "originalTtl": 604800,
          "message": "Using origin max-age for TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "staleTime": 302400,
          "newCacheControl": "public, max-age=604800, stale-while-revalidate=302400",
          "message": "Added stale-while-revalidate directive"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "ttl": 604800,
          "status": 200,
          "contentType": "image/webp",
          "derivative": "none",
          "quality": "default",
          "message": "Calculated final TTL"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "imagePath": "Oliwka_1.JPG",
          "sourceType": "fallback",
          "hasOptions": false,
          "message": "Generating cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "tagCount": 2,
          "message": "BREADCRUMB: Adding custom tags from configuration"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "pathBasedTagsCount": 5,
          "message": "BREADCRUMB: Processing path-based tags"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "tagCount": 14,
          "generationTime": 0,
          "sampleTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1, img-prod-type-image, img-prod-subtype-jpeg...",
          "message": "Generated cache tags"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "tagCount": 14,
          "firstFewTags": "img-prod-path-Oliwka_1-JPG, img-prod-prod, img-prod-site1...",
          "message": "Added cache tags to response via Cache-Tag header"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "cacheControl": "public, max-age=604800, stale-while-revalidate=302400, no-transform, stale-if-error=86400",
          "cacheTagHeader": "img-prod-path-Oliwka_1-JPG,img-prod-prod,img-prod-site1,img-prod-type-image,img-prod-subtype-jpeg,img-prod-cc-public,img-prod-cc-max-age-long,img-prod-origin-fallback,img-prod-method-get,img-prod-status-success,img-prod-code-200,img-prod-mime-image,img-prod-imgfmt-jpeg,img-prod-size-huge",
          "status": 200,
          "ttl": 604800,
          "message": "Applied enhanced cache headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "debugEnabledInConfig": true,
          "environment": "production",
          "forceDebugHeaders": false,
          "message": "BREADCRUMB: Checking if debug is enabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugConfig": {
            "enabled": true,
            "forceDebugHeaders": false,
            "allowedEnvironmentsStr": "",
            "environment": "production",
            "headersStr": "cache,mode",
            "verbose": false,
            "isDebugQueryParam": false
          },
          "message": "Debug mode enabled for request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "message": "Cache miss for client info, detecting"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "headers": {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Encoding": "gzip, br"
          },
          "message": "Detecting client information"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "deviceType": "desktop",
          "saveData": false,
          "acceptsWebp": true,
          "acceptsAvif": true,
          "detectionMethod": "browser:user-agent,formats:user-agent",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "preferredFormats": "avif,webp,jpeg,png,gif",
          "detectionTime": "0ms",
          "fromCache": false,
          "message": "Client detection completed"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "deviceType": "desktop",
          "networkQuality": "unknown",
          "deviceClassification": "mid-range",
          "message": "Detected client info for debug headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "debugEnabledInConfig": true,
          "environment": "production",
          "forceDebugHeaders": false,
          "message": "BREADCRUMB: Checking if debug is enabled"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugConfig": {
            "enabled": true,
            "forceDebugHeaders": false,
            "allowedEnvironmentsStr": "",
            "environment": "production",
            "headersStr": "cache,mode",
            "verbose": false,
            "isDebugQueryParam": false
          },
          "message": "Debug mode enabled for request"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "debugEnabled": true,
          "headerCategories": [
            "cache",
            "mode"
          ],
          "transformOptions": [],
          "metricsAvailable": true,
          "message": "Adding enhanced debug headers"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "url": "https://images.erfi.dev/Oliwka_1.JPG",
          "cacheControl": "no-cache",
          "reason": "Cache-Control header indicates no caching",
          "message": "Cache-Control header bypass detected"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 30,
          "type": "breadcrumb",
          "breadcrumb": true,
          "status": 200,
          "contentLength": "368282",
          "contentType": "image/webp",
          "totalDurationMs": 94,
          "durationMs": 94,
          "message": "BREADCRUMB: Transform image command completed"
        }
      ],
      "level": "info",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "message": "Completed measurement: image_request - 94ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "message": "Performance: core:image_request - 94ms (avg: 94.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "message": "Completed measurement: total - 94ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "message": "Performance: core:total - 94ms (avg: 94.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "368282",
          "message": "Completed measurement: total - 94ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "368282",
          "storage": 62,
          "transform": 32,
          "detection": 0,
          "total": 94,
          "message": "Request completed in 94ms"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    },
    {
      "message": [
        {
          "time": 1742991657668,
          "level": 20,
          "status": 200,
          "contentType": "image/webp",
          "contentLength": "368282",
          "message": "Performance: request:total - 94ms (avg: 94.00ms)"
        }
      ],
      "level": "debug",
      "timestamp": 1742991657668
    }
  ],
  "eventTimestamp": 1742991657533,
  "event": {
    "request": {
      "url": "https://images.erfi.dev/Oliwka_1.JPG",
      "method": "GET",
      "headers": {
        "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
        "accept-encoding": "gzip, br",
        "accept-language": "en-GB,en;q=0.5",
        "cache-control": "no-cache",
        "cf-connecting-ip": "195.240.81.42",
        "cf-device-type": "desktop",
        "cf-ipcountry": "NL",
        "cf-ray": "92669ae3799a0bba",
        "cf-visitor": "{\"scheme\":\"https\"}",
        "connection": "Keep-Alive",
        "cookie": "REDACTED",
        "host": "images.erfi.dev",
        "pragma": "no-cache",
        "priority": "u=0, i",
        "sec-fetch-dest": "document",
        "sec-fetch-mode": "navigate",
        "sec-fetch-site": "cross-site",
        "sec-gpc": "1",
        "upgrade-insecure-requests": "1",
        "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0",
        "x-forwarded-proto": "https",
        "x-real-ip": "195.240.81.42"
      },
      "cf": {
        "clientTcpRtt": 4,
        "requestHeaderNames": {},
        "httpProtocol": "HTTP/2",
        "tlsCipher": "AEAD-AES128-GCM-SHA256",
        "continent": "EU",
        "asn": 1136,
        "clientAcceptEncoding": "gzip, deflate, br, zstd",
        "country": "NL",
        "isEUCountry": "1",
        "latitude": "51.71320",
        "verifiedBotCategory": "",
        "botManagement": {
          "jsDetection": {
            "passed": false
          },
          "ja4Signals": {
            "h2h3_ratio_1h": 0.94561821222305,
            "heuristic_ratio_1h": 0.0001961686211871,
            "reqs_quantile_1h": 0.99986201524734,
            "uas_rank_1h": 601,
            "browser_ratio_1h": 0.9913284778595,
            "paths_rank_1h": 115,
            "reqs_rank_1h": 138,
            "cache_ratio_1h": 0.24550874531269,
            "ips_rank_1h": 90,
            "ips_quantile_1h": 0.99990999698639
          },
          "staticResource": false,
          "corporateProxy": false,
          "ja4": "t13d1717h2_5b57614c22b0_e6dcd7ae0a9e",
          "verifiedBot": false,
          "ja3Hash": "0e76c7e9d06fa0e211b1827687dd8f43",
          "score": 99,
          "detectionIds": {}
        },
        "tlsClientAuth": {
          "certIssuerDNLegacy": "",
          "certIssuerSKI": "",
          "certSubjectDNRFC2253": "",
          "certSubjectDNLegacy": "",
          "certFingerprintSHA256": "",
          "certNotBefore": "",
          "certSKI": "",
          "certSerial": "",
          "certIssuerDN": "",
          "certVerified": "NONE",
          "certNotAfter": "",
          "certSubjectDN": "",
          "certPresented": "0",
          "certRevoked": "0",
          "certIssuerSerial": "",
          "certIssuerDNRFC2253": "",
          "certFingerprintSHA1": ""
        },
        "requestPriority": "weight=42;exclusive=0;group=0;group-weight=0",
        "tlsExportedAuthenticator": {
          "clientFinished": "3181f3831cb09c870c6c23178154dfc990346a51268d0547b9665751837d6878",
          "clientHandshake": "338a83a539689497d37339396525fd5dbe5be4e9b90d1f3feefd5e9c5c4abfe7",
          "serverHandshake": "63fae1b8bd3e27714855bb2fa3fff9cf072035d30fb8c83f4b8eb316d8256c89",
          "serverFinished": "ccaed5112bd065058834d99e545b8f45409e60244c3aafb47df8761795c59d3d"
        },
        "tlsVersion": "TLSv1.3",
        "colo": "AMS",
        "timezone": "Europe/Amsterdam",
        "city": "Rosmalen",
        "region": "North Brabant",
        "edgeRequestKeepAliveStatus": 1,
        "tlsClientRandom": "o6u8n22FLaBmcItpZKAsYPJ2NPIq8ML1s7gDNNroyT4=",
        "longitude": "5.36610",
        "clientTrustScore": 99,
        "postalCode": "5242",
        "regionCode": "NB",
        "asOrganization": "KPN",
        "tlsClientExtensionsSha1": "NYijHAs4aao+msf5RuGQQUiFAuQ=",
        "tlsClientHelloLength": "2382"
      }
    },
    "response": {
      "status": 200
    }
  }
}
